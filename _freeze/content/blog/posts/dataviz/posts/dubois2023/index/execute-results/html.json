{
  "hash": "b93f8ba1ff0ddbf7bc47fb6ee032d835",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"DuBois Challenge 2022\"\nexcerpt: \"TidyTuesday 2022 Week 7\"\ndate: 2022-02-21\ndraft: false\nimages:\nseries:\ncategories:\nlayout: single\nexecute: \n  eval: false\n---\n\n\n\n# Overview\n\nThis week is all about **#DuBoisChallenge2022**, I choose plate number 14.\n\n\n\n![Plate 14: ILLITERACY](featured.png){width=\"40%\"}\n\n### Load #TidyTuesday 2022/07 data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplate6 <- read_csv('https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2022/challenge06/data.csv')\n```\n:::\n\n\n### Add a column with distances\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- plate6 %>%\n  janitor::clean_names() %>%\n  mutate(x_axis=c(1860,1860-cumsum(diff(iliteracy_rate))))\ndf\n```\n:::\n\n\n### Create axis lables vectors\n\n\n::: {.cell}\n\n```{.r .cell-code}\niliteracy_rate<-df$iliteracy_rate\nx_axis <-df$x_axis\n```\n:::\n\n\n### Fonts\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(showtext)\nfont_add(family = \"Public Sans Thin\",\n         regular = \"PublicSans-Thin.ttf\")\n\nfont_add(family = \"PublicSans-Medium\",\n         regular = \"PublicSans-Medium.ttf\")\n \nshowtext_auto()\n```\n:::\n\n\n### Make the plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggstar) # for making the triangles\n  \nnumber6 <- df %>%\n  ggplot(aes(x = x_axis, y = iliteracy_rate))+\n  \n  # add the columns\n  geom_col(width = 1.5,fill=\"black\") +\n\n  # this is one way to add the horizontal lines\n  geom_segment(aes(x = 1858, xend = x_axis+0.1,\n                   y = iliteracy_rate, yend = iliteracy_rate),\n               size = 2.5, color = \"black\") +\n  geom_segment(aes(x = 1858, xend = x_axis+0.1,\n                   y = iliteracy_rate, yend = iliteracy_rate),\n               size = 2.4, color = \"#d9ccbf\")+\n  \n  # with ggstar add the triangular shape\n  geom_star(starshape = 20, size = 0.8,angle = 90, fill = \"black\",\n            position = position_nudge(x = -0.1, y = -0.15)) +\n  \n  # add the little round corners\n  geom_curve(aes(x = x_axis - 0.1, xend = x_axis + 0.65,\n                 y = iliteracy_rate + 1.2, yend = iliteracy_rate),\n             curvature = -0.6, size = 0.1) +\n  \n  # customize the axis values\n  scale_x_continuous(breaks = x_axis,\n                     labels = c(\"99%\",\"92%\",\"81.6%\",\"67.27%\",\"(50%?)\"),\n                     expand = expansion(0.01)) +\n  scale_y_continuous(breaks = iliteracy_rate,\n                     labels = c(1860,1870,1880,1890,\"(1900?)\"),\n                     expand = expansion(0.01)) +\n  \n  # add a title and a theme\n  labs(title = \"ILLITERACY.\\n\", subtitle = \" \", caption = \"fg\")+\n  theme_void()+\n  theme(text = element_text(size = 18, family = \"Public Sans Thin\", color = \"grey25\"),\n        plot.title = element_text(size = 24, family = \"PublicSans-Medium\",face = \"bold\", hjust = 0.5),\n        plot.background = element_rect(fill = \"#d2c2b3\", color = \"#d2c2b3\"),\n        panel.background =  element_rect(fill = \"#d2c2b3\",color = \"#d2c2b3\"),\n        axis.text.x = element_text(),\n        axis.text.y = element_text(),\n        plot.margin = margin(0,25,0,25))\n```\n:::\n\n\n### Assemble background, plot and annotation\n\nWith {cowplot} add a background image as the same as the original one and the text on the left side of the x-axis\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cowplot)\nggdraw()+\n  draw_image(\"number6.png\",scale=1.1) + # set the background image \n  draw_plot(number6,scale=0.9) + # add the plot\n  draw_label(\"PERCENT OF\\nILLITERACY.\", # add info on a side \n            x=0.19,y=0.09,\n            size = 12.5,\n            fontfamily=\"Public Sans Thin\",lineheight = .3)\n```\n:::\n\n\n### Save the plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"w7_Number6.png\", \n       width = 1000, height = 1350, \n       units = \"px\", dpi = 320)\n```\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}